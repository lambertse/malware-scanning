#ifndef __ms_localhash_manager_h__
#define __ms_localhash_manager_h__

#include "shared/SQLiteCpp/include/SQLiteCpp/SQLiteCpp.h"
#include "ms_return_codes.h"
#include <thread>
#include <mutex>

class LocalHashManager
{
public:
    static LocalHashManager* instance();
    LocalHashManager( const LocalHashManager& ) = delete;
    LocalHashManager( LocalHashManager&& ) = delete;
    LocalHashManager& operator=( const LocalHashManager& ) = delete;
    LocalHashManager& operator=( LocalHashManager&& ) = delete;

    ms_rc queryLocalHash(const std::wstring& srcHash, std::wstring& result);
    ms_rc saveLocalHash(const std::wstring& srcHash, const std::wstring& srcResult);

private:
    LocalHashManager();
    
    ~LocalHashManager();
    
	std::mutex _queryMtx;
	std::mutex _savingMtx;
    static LocalHashManager* m_instance;
};


#endif