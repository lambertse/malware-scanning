#ifndef __memory_finder_core_h__
#define __memory_finder_core_h__

#include  "../PathFinder.h"

#include <mutex>
#include <set>

namespace owc {
namespace finder {
class Monitor;
class MemoryFinderCore : public PathFinder {
 public:
  MemoryFinderCore();
  MemoryFinderCore(std::shared_ptr<std::recursive_mutex>);
  ~MemoryFinderCore();

  LargeSize getTotalFileCount() override;
  LargeSize getTotalFileCount(const Path& /*path*/,
                              const finder::Options& /*options*/,
                              uint32_t /*threadCount = 1*/) override {
    return 0;
  }
  void getTotalFileCount(
      std::function<void(LargeSize totalFiles)> callback) override;
  bool accesible(const Path& path, int& error) override { return true; }

 private:
  void explorePath(const Path& path) override;
  std::set<std::string> memoryPaths_;
  std::mutex mutex_;
};
}  // namespace finder
}  // namespace owc

#endif