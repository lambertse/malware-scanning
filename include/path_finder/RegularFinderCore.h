#ifndef __regular_finder_core_h__
#define __regular_finder_core_h__

#include  "PathFinder.h"

#include <mutex>
#include <unordered_set>
#include <thread>

namespace owc {
namespace finder {
using namespace maf::threading;
class RegularFinderCore : public PathFinder {
 public:
  RegularFinderCore();
  RegularFinderCore(std::shared_ptr<std::recursive_mutex> mtx);
  ~RegularFinderCore();

  LargeSize getTotalFileCount() override;
  LargeSize getTotalFileCount(const Path& path,
                              const finder::Options& options,
                              uint32_t threadCount = 1) override;
  void getTotalFileCount(FileCountCallback callback) override;
  bool accesible(const Path& path, int& error) override;
  void stop() override;

 private:
  void explorePath(const Path& path) override;
//   std::set<std::shared_ptr<Queue<Path>>> queues_;
  std::recursive_mutex mtx_;
};
}  // namespace finder
}  // namespace owc

#endif