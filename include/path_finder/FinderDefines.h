#ifndef __finder_defines_h__
#define __finder_defines_h__



#include <functional>
#include <string>
#include <vector>

#ifdef WIN32
  #include <filesystem>   
  using Path = std::filesystem::path;
#else
  #include <experimental/filesystem>
  using Path = std::experimental::filesystem::path;
#endif

using Paths = std::vector<Path>;

namespace owc {
namespace finder {


enum class Type { regular, oesis, memory };
enum class State {
  not_initialized,
  initialized,
  running,
  paused,
  stopped,
  finished,
  error
};

inline std::string stateString(State state) {
  switch (state) {
    case owc::finder::State::not_initialized:
      return "not_initialized";
    case owc::finder::State::initialized:
      return "initialized";
    case owc::finder::State::paused:
      return "paused";
    case owc::finder::State::running:
      return "running";
    case owc::finder::State::stopped:
      return "stopped";
    case owc::finder::State::finished:
      return "finished";
    case owc::finder::State::error:
      return "error";
    default:
      return "undefine state: " + std::to_string(static_cast<int>(state));
  }
}

struct FoundPathInfo {
  enum class Type { Regular, Network, Mobile };
  FoundPathInfo() = default;
  FoundPathInfo(const Path& p, bool isDir = false)
      : path{p}, isDirectory{isDir} {}
  Path path;
  uint32_t childCount = -1;
  bool isDirectory = false;
  Type type = Type::Regular;
};

using FoundPathConstInfoPtr = std::shared_ptr<const FoundPathInfo>;
using FoundPathInfoPtr = std::shared_ptr<FoundPathInfo>;
using FoundCallback = std::function<void(FoundPathConstInfoPtr)>;
using FinishedCallback = std::function<void()>;

struct Options {
  bool recursive = true;
  bool async = true;
  bool file_only = false;
  bool exploreDLL = true;  // apply only for memory finder
  Paths excludedPath;
};
}  // namespace finder
}  // namespace owc

#define FINDER_LOGGER_DEBUG(...)
#define FINDER_LOGGER_WARN(...)
#define FINDER_LOGGER_ERROR(...)

#endif
